$(document).ready((function(){!function(e){var o=document.querySelector("#zdrop-template");o.id="";var a=o.parentNode.innerHTML;o.parentNode.removeChild(o);var n=new Dropzone(e,{url:"/new-file/",maxFiles:5,maxFilesize:500,previewTemplate:a,previewsContainer:"#previews",clickable:"#upload-label",acceptedFiles:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});n.on("addedfile",(function(e){$(".preview-container").css("visibility","visible")})),n.on("totaluploadprogress",(function(e){var o=document.querySelector(".progress .determinate");null!=o&&(o.style.width=e+"%")})),n.on("dragenter",(function(){$(".fileuploader").addClass("active")})),n.on("dragleave",(function(){$(".fileuploader").removeClass("active")})),n.on("drop",(function(){$(".fileuploader").removeClass("active")})),$(".Submit").click((async function(e){e.preventDefault();let o=$('input[name="csrfmiddlewaretoken"]').val(),a=n.files,t=new FormData;t.append("csrfmiddlewaretoken",o);for(var i=0;i<a.length;i++)t.append("files",a[i]);$(".Loader").removeClass("d-none"),200==(await fetch("/new-proccess/",{method:"post",body:t})).status?($(".Loader").addClass("d-none"),Done("محصولات با موفقیت اضافه شدند!"),setTimeout((()=>window.location.reload()),4e3)):($(".Loader").addClass("d-none"),Failed("مشکلی پیش آمده است!"))}))}("#zdrop")}));
