$(document).ready((function(){!function(e){var a=document.querySelector("#zdrop-template");a.id="";var t=a.parentNode.innerHTML;a.parentNode.removeChild(a);var n=new Dropzone(e,{url:"/new-file/",maxFiles:5,maxFilesize:500,previewTemplate:t,previewsContainer:"#previews",clickable:"#upload-label",acceptedFiles:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});n.on("addedfile",(function(e){$(".preview-container").css("visibility","visible")})),n.on("totaluploadprogress",(function(e){var a=document.querySelector(".progress .determinate");null!=a&&(a.style.width=e+"%")})),n.on("dragenter",(function(){$(".fileuploader").addClass("active")})),n.on("dragleave",(function(){$(".fileuploader").removeClass("active")})),n.on("drop",(function(){$(".fileuploader").removeClass("active")})),$(".Submit").click((async function(e){e.preventDefault();let a=$('input[name="csrfmiddlewaretoken"]').val(),t=n.files,r=new FormData;r.append("csrfmiddlewaretoken",a);for(var d=0;d<t.length;d++)r.append("files",t[d]);$(".Loader").removeClass("d-none"),200==(await fetch("/new-proccess/",{method:"post",body:r})).status?($(".Loader").addClass("d-none"),Done("Datas Added Succesfully"),setTimeout((()=>$("#crud-tab").trigger("click")),1e3)):($(".Loader").addClass("d-none"),Failed("There's been a Problem"))}))}("#zdrop")})),$("#crud-tab").click((async function(){let e=await fetch("/dataset/"),a=await e.json();$("#Passengers").empty(),a.forEach((e=>{$("#Passengers").append(`\n\t  <option value="${e.id}"\n\t\tdata-PassengerId="${e.PassengerId}"\n\t\tdata-Survived="${e.Survived}"\n\t\tdata-Pclass="${e.Pclass}"\n\t\tdata-Name="${e.Name}"\n\t\tdata-Sex="${e.Sex}"\n\t\tdata-Age="${e.Age}"\n\t\tdata-SibSp="${e.SibSp}"\n\t\tdata-Parch="${e.Parch}"\n\t\tdata-Ticket="${e.Ticket}"\n\t\tdata-Fare="${e.Fare}"\n\t\tdata-Cabin="${e.Cabin}"\n\t\tdata-Embarked="${e.Embarked}"\n\t\t>\n\t\t${e.Name}\n\t  </option>\n\t  `)})),$("#Passengers").children("option").first().attr("selected",!0),$("#Passengers").trigger("change")})),$("#Passengers").change((function(){let e=$(this).val()[0],a=$(`#Passengers option[value='${e}']`);$("#Survived").val($(a).data("survived")),$("#Pclass").val($(a).data("pclass")),$("#Name").val($(a).data("name")),$("#Sex").val($(a).data("sex")),$("#Age").val($(a).data("age")),$("#SibSp").val($(a).data("sibsp")),$("#Parch").val($(a).data("parch")),$("#Ticket").val($(a).data("ticket")),$("#Fare").val($(a).data("fare")),$("#Cabin").val($(a).data("cabin")),$("#Embarked").val($(a).data("embarked"))})),$(".update-btn").click((async function(e){e.preventDefault();let a=$("#Passengers").val(),t=$("#UpdateForm input[name='Survived']").val(),n=$("#UpdateForm input[name='Pclass']").val(),r=$("#UpdateForm input[name='Name']").val(),d=$("#UpdateForm input[name='Sex']").val(),s=$("#UpdateForm input[name='Age']").val(),i=$("#UpdateForm input[name='SibSp']").val(),o=$("#UpdateForm input[name='Parch']").val(),l=$("#UpdateForm input[name='Ticket']").val(),c=$("#UpdateForm input[name='Fare']").val(),m=$("#UpdateForm input[name='Cabin']").val(),p=$("#UpdateForm input[name='Embarked']").val();const u=new Headers;u.append("Content-Type","application/json"),u.append("X-CSRFToken",$('#UpdateForm input[name="csrfmiddlewaretoken"]').val()),200==(await fetch(`/dataset/${a[0]}/`,{method:"PUT",headers:u,redirect:"follow",body:JSON.stringify({id:a[0],Survived:t,Pclass:n,Name:r,Sex:d,Age:s,SibSp:i,Parch:o,Ticket:l,Fare:c,Cabin:m,Embarked:p})})).status&&(Done("Updated!"),$("#crud-tab").trigger("click"))})),$(".destroy-btn").click((async function(e){e.preventDefault();let a=$("#Passengers").val();const t=new Headers;t.append("Content-Type","multipart/form-data"),t.append("X-CSRFToken",$('#UpdateForm input[name="csrfmiddlewaretoken"]').val()),204==(await fetch(`/dataset/${a}/`,{method:"DELETE",headers:t,redirect:"follow"})).status&&(Done("Deleted!"),$("#crud-tab").trigger("click"))})),$(".newPassenger").click((function(e){$(".newPassenger").addClass("d-none"),$(".newPassenger").fadeOut(),$(".EditPassengers").removeClass("d-none"),$(".EditPassengers").fadeIn(),$(".data-form").fadeOut(),$(".data-form").addClass("d-none"),$(".data-new-form").removeClass("d-none"),$(".data-new-form").fadeIn()})),$(".EditPassengers").click((function(e){$(".EditPassengers").addClass("d-none"),$(".EditPassengers").fadeOut(),$(".newPassenger").removeClass("d-none"),$(".newPassenger").fadeIn(),$(".data-new-form").fadeOut(),$(".data-new-form").addClass("d-none"),$(".data-form").removeClass("d-none"),$(".data-form").fadeIn()})),$(".submit-btn").click((async function(e){e.preventDefault();$("#Passengers").val();let a=$("#NewForm input[name='Survived']").val(),t=$("#NewForm input[name='Pclass']").val(),n=$("#NewForm input[name='Name']").val(),r=$("#NewForm input[name='Sex']").val(),d=$("#NewForm input[name='Age']").val(),s=$("#NewForm input[name='SibSp']").val(),i=$("#NewForm input[name='Parch']").val(),o=$("#NewForm input[name='Ticket']").val(),l=$("#NewForm input[name='Fare']").val(),c=$("#NewForm input[name='Cabin']").val(),m=$("#NewForm input[name='Embarked']").val();const p=new Headers;p.append("Content-Type","application/json"),p.append("X-CSRFToken",$('#NewForm input[name="csrfmiddlewaretoken"]').val()),201==(await fetch("/dataset/",{method:"POST",headers:p,redirect:"follow",body:JSON.stringify({Survived:a,Pclass:t,Name:n,Sex:r,Age:d,SibSp:s,Parch:i,Ticket:o,Fare:l,Cabin:c,Embarked:m})})).status&&(Done("Submited!"),$("#crud-tab").trigger("click"),$(".EditPassengers").trigger("click"))}));
